CREATE  TABLE dbo.BATCH_RUN_D ( 
	BATCH_RUN_KEY        int    IDENTITY  NOT NULL,
	BATCH_RUN_ID         varchar(50)      NOT NULL,
	BATCH_RUN_DATE       date      NOT NULL,
	DESCRIPTION          varchar(500)      NULL,
	PURPOSE              varchar(500)      NULL,
	BACKGROUND           varchar(500)      NULL,
	CONCLUSIONS          varchar(500)      NULL,
	NEXT_STEPS           varchar(500)      NULL,
	USER_NM              varchar(100)      NULL,
	PROJECT_NM           varchar(100)      NULL,
	FILE_NM              varchar(250)      NOT NULL,
	CONSTRAINT BATCH_RUN_D_PK PRIMARY KEY  ( BATCH_RUN_KEY ) ,
	CONSTRAINT BATCH_RUN_D_UK1 UNIQUE ( BATCH_RUN_ID ) 
 ) ;;
GO

CREATE  TABLE dbo.PARAMETER_D ( 
	PARAMETER_KEY        int    IDENTITY  NOT NULL,
	PARAMETER_NM         varchar(100)      NOT NULL,
	CONSTRAINT PARAMETER_D_PK PRIMARY KEY  ( PARAMETER_KEY ) ,
	CONSTRAINT PARAMETER_D_UK1 UNIQUE ( PARAMETER_NM ) 
 ) ;;
GO

CREATE  TABLE dbo.COMPONENT_D ( 
	COMPONENT_KEY          int    IDENTITY  NOT NULL,
	COMPONENT_NM           varchar(200)      NULL,
	CONSTRAINT COMPONENT_D_PK PRIMARY KEY  ( COMPONENT_KEY ) ,
	CONSTRAINT COMPONENT_D_UK UNIQUE ( COMPONENT_NM ) 
 ) ;;
GO

CREATE  TABLE dbo.BATCH_COMPONENT_ASSOC_D ( 
	BATCH_RUN_KEY        int      NOT NULL,
	COMPONENT_KEY          int      NOT NULL
	CONSTRAINT BATCH_COMPONENT_ASSOC_D_UK1 UNIQUE ( BATCH_RUN_KEY,COMPONENT_KEY ) 
 );
GO

CREATE  TABLE dbo.RESULT_F ( 
	BATCH_RUN_KEY        int      NOT NULL,
	PARAMETER_KEY        int      NOT NULL,
	COMPONENT_KEY          int      NOT NULL,
	DATA_SOURCE          varchar(50)      NOT NULL,
	DATA_SEQUENCE        int      NOT NULL,
	FACT_ROW_SEQ         int      NOT NULL,
	MASTER_VAL           varchar(5000)      NULL,
	STRING_VAL           varchar(5000)      NULL,
	NUMERIC_VAL          float      NULL,
	DATETIME_VAL         datetime      NULL,
	DATA_TYPE            varchar(25)      NULL,
	UNIT_CD              varchar(100)      NULL,
	RELATIVE_TIME        varchar(20)      NULL,
	RELATIVE_TIME_S      int      NULL,
	RELATIVE_TIME_HR     float      NULL,
	CONSTRAINT RESULT_F_UK1 UNIQUE ( BATCH_RUN_KEY, PARAMETER_KEY, COMPONENT_KEY, DATA_SOURCE, DATA_SEQUENCE ) 
 ) ;;
GO

ALTER TABLE dbo.BATCH_COMPONENT_ASSOC_D ADD CONSTRAINT fk_BATCH_COMPONENT_ASSOC_D_BATCH_RUN_D FOREIGN KEY ( BATCH_RUN_KEY ) REFERENCES dbo.BATCH_RUN_D( BATCH_RUN_KEY );
GO

ALTER TABLE dbo.BATCH_COMPONENT_ASSOC_D ADD CONSTRAINT fk_BATCH_COMPONENT_ASSOC_D_COMPONENT_D FOREIGN KEY ( COMPONENT_KEY ) REFERENCES dbo.COMPONENT_D( COMPONENT_KEY );
GO

ALTER TABLE dbo.RESULT_F ADD CONSTRAINT [FK INPUT F BATCH RUN D 0] FOREIGN KEY ( BATCH_RUN_KEY ) REFERENCES dbo.BATCH_RUN_D( BATCH_RUN_KEY );
GO

ALTER TABLE dbo.RESULT_F ADD CONSTRAINT [FK INPUT F PARAMETER D 0] FOREIGN KEY ( PARAMETER_KEY ) REFERENCES dbo.PARAMETER_D( PARAMETER_KEY );
GO

ALTER TABLE dbo.RESULT_F ADD CONSTRAINT [FK RESULT F COMPONENT D] FOREIGN KEY ( COMPONENT_KEY ) REFERENCES dbo.COMPONENT_D( COMPONENT_KEY );
GO

INSERT INTO PARAMETER_D (PARAMETER_NM)
VALUES ('COMPONENT.MassFlow');
INSERT INTO PARAMETER_D (PARAMETER_NM)
VALUES ('COMPONENT.Temperature');
INSERT INTO PARAMETER_D (PARAMETER_NM)
VALUES ('COMPONENT.TotalMass');
INSERT INTO PARAMETER_D (PARAMETER_NM)
VALUES ('COMPONENT.TotalVolume');

 

INSERT INTO COMPONENT_D (COMPONENT_NM)

VALUES ('NotApplied')